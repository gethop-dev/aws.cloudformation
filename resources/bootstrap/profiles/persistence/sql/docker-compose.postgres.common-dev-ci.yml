services:
  postgres:
    ports:
      - mode: ingress
        target: {{project.profiles.persistence-sql.deployment.to-develop.container.environment.dev.database.port}}
        published: {{project.profiles.persistence-sql.deployment.to-develop.container.environment.dev.database.port}}
        protocol: tcp
    volumes:
      - type: bind
        source: ./postgres/init-scripts/to-develop/dev
        target: /docker-entrypoint-initdb.d
        read_only: true
        bind: {}
    healthcheck:
      test:
        - CMD-SHELL
        - pg_isready
        - -U
        - postgres
      interval: 10s
      timeout: 5s
      retries: 5
